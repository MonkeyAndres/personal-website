---
import { SITE } from '@consts'
import { getLocalizedPosts, sortByDate, filterPinnedPosts } from '@lib/posts'
import { Locale } from '@lib/i18n'
import IndexView from '@views/IndexView.astro'

const allBlogPosts = await getLocalizedPosts(Locale.es)
const sortedPosts = allBlogPosts
  .sort(sortByDate)
  .slice(0, SITE.NUM_POSTS_ON_HOMEPAGE)
const pinnedPosts = allBlogPosts.filter(filterPinnedPosts)
---

<IndexView
  pinnedPosts={pinnedPosts}
  sortedPosts={sortedPosts}
  locale={Locale.es}
/>
